/**
 * Compatibility CSS - Fallbacks for Older Browsers
 * 
 * This file provides RGB/HSL fallbacks for modern OKLCH colors
 * to ensure the site works on older browsers and restricted networks.
 * 
 * Browser Support:
 * - OKLCH: Chrome 111+, Safari 15.4+, Firefox 113+ (2023+)
 * - These fallbacks support: Chrome 60+, Safari 12+, Firefox 60+ (2018+)
 */

/* ========================================
   TAILWIND GRADIENT UTILITY FALLBACKS
   ======================================== */
/* These rules provide explicit fallbacks for Tailwind's gradient utilities
   when they use CSS variables that contain OKLCH colors */

.no-oklch .bg-gradient-to-r.from-primary {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary.to-accent {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary.via-accent {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36),
    var(--tw-gradient-to, rgba(251, 191, 36, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary.via-accent.to-primary {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36),
    rgb(234, 179, 8)
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-primary {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-primary.via-primary\/90 {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    rgba(234, 179, 8, 0.9),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-primary.via-primary\/90.to-primary\/80 {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    rgba(234, 179, 8, 0.9),
    rgba(234, 179, 8, 0.8)
  ) !important;
}

.no-oklch .bg-gradient-to-tl.from-primary\/20 {
  background: linear-gradient(
    to top left,
    rgba(234, 179, 8, 0.2),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-tl.from-primary\/20.to-accent\/20 {
  background: linear-gradient(
    to top left,
    rgba(234, 179, 8, 0.2),
    rgba(251, 191, 36, 0.2)
  ) !important;
}

/* Text gradient fallback - for bg-clip-text */
.no-oklch
  .bg-clip-text.text-transparent.bg-gradient-to-r.from-primary.via-accent.to-primary {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36),
    rgb(234, 179, 8)
  ) !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  color: transparent !important;
}

.no-oklch
  .bg-clip-text.text-transparent.bg-gradient-to-r.from-primary.to-accent {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  color: transparent !important;
}

/* Fallback for browsers without bg-clip-text support */
@supports not (background-clip: text) {
  .bg-clip-text.text-transparent {
    color: rgb(234, 179, 8) !important;
    background: none !important;
  }
}

/* Additional gradient patterns */
.no-oklch .bg-gradient-to-br.from-primary.to-accent {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
}

.no-oklch .bg-gradient-to-b.from-background {
  background: linear-gradient(
    to bottom,
    rgb(255, 255, 255),
    var(--tw-gradient-to, rgba(255, 255, 255, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-primary\/5 {
  background: linear-gradient(
    to bottom right,
    rgba(234, 179, 8, 0.05),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-primary\/5.via-background.to-accent\/10 {
  background: linear-gradient(
    to bottom right,
    rgba(234, 179, 8, 0.05),
    transparent,
    rgba(251, 191, 36, 0.1)
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary\/10 {
  background: linear-gradient(
    to right,
    rgba(234, 179, 8, 0.1),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary\/10.to-accent\/10 {
  background: linear-gradient(
    to right,
    rgba(234, 179, 8, 0.1),
    rgba(251, 191, 36, 0.1)
  ) !important;
}

.no-oklch .bg-gradient-to-r.from-primary\/10.via-accent\/10.to-primary\/10 {
  background: linear-gradient(
    to right,
    rgba(234, 179, 8, 0.1),
    rgba(251, 191, 36, 0.1),
    rgba(234, 179, 8, 0.1)
  ) !important;
}

/* Category filter buttons */
.no-oklch button.bg-gradient-to-r.from-primary.to-accent {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
}

/* Hover state fallbacks */
.no-oklch
  .bg-gradient-to-r.from-primary.to-accent.hover\:from-primary\/90:hover,
.no-oklch .bg-gradient-to-r.from-primary.to-accent:hover {
  background: linear-gradient(
    to right,
    rgba(234, 179, 8, 0.9),
    rgba(251, 191, 36, 0.9)
  ) !important;
}

.no-oklch
  .bg-gradient-to-br.from-primary.to-accent.hover\:from-primary\/90:hover,
.no-oklch .bg-gradient-to-br.from-primary.to-accent:hover {
  background: linear-gradient(
    to bottom right,
    rgba(234, 179, 8, 0.9),
    rgba(251, 191, 36, 0.9)
  ) !important;
}

/* Card watermark - very low opacity for subtle background effect */
.no-oklch .text-primary-foreground\/\[0\.07\] {
  color: rgba(250, 250, 250, 0.04) !important;
}

/* Global blueish background tint overlay */
.no-oklch .bg-gradient-to-br.from-primary\/\[0\.03\].via-transparent.to-accent\/\[0\.02\] {
  background: linear-gradient(
    to bottom right,
    rgba(234, 179, 8, 0.03),
    transparent,
    rgba(251, 191, 36, 0.02)
  ) !important;
}

/* Hero section header buttons - darker backgrounds for better visibility */
.no-oklch .bg-background\/90.backdrop-blur-sm {
  background-color: rgba(20, 20, 40, 0.85) !important;
  color: rgb(255, 255, 255) !important;
}

/* Background color gradients with opacity */
.no-oklch .bg-gradient-to-b.from-background\/40 {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.4),
    var(--tw-gradient-to, rgba(255, 255, 255, 0))
  ) !important;
}

.no-oklch .bg-gradient-to-b.from-background\/40.via-background\/60 {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.4),
    rgba(255, 255, 255, 0.6),
    var(--tw-gradient-to, rgba(255, 255, 255, 0))
  ) !important;
}

.no-oklch
  .bg-gradient-to-b.from-background\/40.via-background\/60.to-background\/90 {
  background: transparent !important;
}

.no-oklch .bg-gradient-to-b.from-background.to-muted\/50 {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0),
    rgba(245, 245, 245, 0.5)
  ) !important;
}

/* Specific fallback for questions section to ensure animated lights show through */
.no-oklch section#questions-section {
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0),
    rgba(245, 245, 245, 0.5)
  ) !important;
}

/* Dark mode background gradients */
.dark
  .no-oklch
  .bg-gradient-to-b.from-background\/40.via-background\/60.to-background\/90 {
  background: linear-gradient(
    to bottom,
    rgba(10, 10, 10, 0.4),
    rgba(10, 10, 10, 0.6),
    rgba(10, 10, 10, 0.9)
  ) !important;
}

.dark .no-oklch .bg-gradient-to-b.from-background.to-muted\/50 {
  background: linear-gradient(
    to bottom,
    rgb(10, 10, 10),
    rgba(23, 23, 23, 0.5)
  ) !important;
}

/* InstallPrompt hardcoded OKLCH fallbacks */
.no-oklch .bg-gradient-to-br.from-\[oklch\(0\.25_0\.1_240\)\] {
  background: linear-gradient(
    to bottom right,
    rgb(23, 23, 50),
    var(--tw-gradient-to, rgba(23, 23, 50, 0))
  ) !important;
}

.no-oklch
  .bg-gradient-to-br.from-\[oklch\(0\.25_0\.1_240\)\].to-\[oklch\(0\.15_0\.1_240\)\] {
  background: linear-gradient(
    to bottom right,
    rgb(23, 23, 50),
    rgb(12, 12, 25)
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-\[oklch\(0\.75_0\.15_85\)\] {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    var(--tw-gradient-to, rgba(234, 179, 8, 0))
  ) !important;
}

.no-oklch
  .bg-gradient-to-br.from-\[oklch\(0\.75_0\.15_85\)\].to-\[oklch\(0\.85_0\.18_90\)\] {
  background: linear-gradient(
    to bottom right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
}

.no-oklch .bg-gradient-to-br.from-\[oklch\(0\.75_0\.15_85\)\]\/10 {
  background: linear-gradient(
    to bottom right,
    rgba(234, 179, 8, 0.1),
    transparent
  ) !important;
}

.no-oklch
  .bg-gradient-to-r.from-\[oklch\(0\.75_0\.15_85\)\].to-\[oklch\(0\.85_0\.18_90\)\] {
  background: linear-gradient(
    to right,
    rgb(234, 179, 8),
    rgb(251, 191, 36)
  ) !important;
}

/* ========================================
   BASE COLOR VARIABLE FALLBACKS
   ======================================== */

/* Default theme fallbacks for legacy browsers - Use BLUE theme to match index.css */
.no-oklch {
  /* Background colors - RGB fallbacks for blue theme */
  --background: rgb(26, 31, 61);
  --foreground: rgb(250, 250, 250);

  /* Card colors */
  --card: rgb(38, 46, 78);
  --card-foreground: rgb(250, 250, 250);

  /* Popover colors */
  --popover: rgb(38, 46, 78);
  --popover-foreground: rgb(250, 250, 250);

  /* Primary colors - Yellow/Gold theme */
  --primary: rgb(234, 179, 8);
  --primary-foreground: rgb(26, 31, 61);

  /* Secondary colors */
  --secondary: rgb(72, 85, 142);
  --secondary-foreground: rgb(250, 250, 250);

  /* Muted colors */
  --muted: rgb(51, 61, 102);
  --muted-foreground: rgb(200, 205, 224);

  /* Accent colors */
  --accent: rgb(251, 191, 36);
  --accent-foreground: rgb(26, 31, 61);

  /* Destructive colors */
  --destructive: rgb(220, 79, 79);
  --destructive-foreground: rgb(250, 250, 250);

  /* Border and input colors */
  --border: rgb(64, 76, 122);
  --input: rgb(64, 76, 122);
  --ring: rgb(251, 191, 36);

  /* Chart colors */
  --chart-1: rgb(234, 179, 8);
  --chart-2: rgb(59, 130, 246);
  --chart-3: rgb(139, 92, 246);
  --chart-4: rgb(251, 191, 36);
  --chart-5: rgb(250, 204, 21);

  /* Sidebar colors */
  --sidebar: rgb(250, 250, 250);
  --sidebar-foreground: rgb(10, 10, 10);
  --sidebar-primary: rgb(20, 20, 20);
  --sidebar-primary-foreground: rgb(250, 250, 250);
  --sidebar-accent: rgb(245, 245, 245);
  --sidebar-accent-foreground: rgb(20, 20, 20);
  --sidebar-border: rgb(229, 229, 229);
  --sidebar-ring: rgb(163, 163, 163);
}

/* Utility class fallbacks for common background/text colors */
.no-oklch .bg-card {
  background-color: rgb(38, 46, 78) !important;
}

.no-oklch .bg-primary {
  background-color: rgb(234, 179, 8) !important;
}

.no-oklch .bg-accent {
  background-color: rgb(251, 191, 36) !important;
}

.no-oklch .text-primary {
  color: rgb(234, 179, 8) !important;
}

.no-oklch .text-accent {
  color: rgb(251, 191, 36) !important;
}

.no-oklch .text-background {
  color: rgb(250, 250, 250) !important;
}

.no-oklch .border-primary {
  border-color: rgb(234, 179, 8) !important;
}

.no-oklch .border-accent {
  border-color: rgb(251, 191, 36) !important;
}

/* Fallback for browsers that don't support backdrop-filter */
@supports not (backdrop-filter: blur(10px)) {
  .backdrop-blur,
  .backdrop-blur-sm,
  .backdrop-blur-md,
  .backdrop-blur-lg,
  .backdrop-blur-xl {
    background-color: rgba(0, 0, 0, 0.5) !important;
  }
}

/* Disable complex animations on devices that prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Disable heavy blur effects on low-resolution displays */
@media (max-resolution: 1dppx) {
  .blur,
  .blur-sm,
  .blur-md,
  .blur-lg,
  .blur-xl,
  .blur-2xl,
  .blur-3xl {
    filter: none !important;
  }
}

/* Browser-specific fixes */
/* These classes are added via JavaScript feature detection */

/* Ensure blue boxes (cards) have solid fallback colors */
.no-oklch .bg-card {
  background-color: rgb(38, 46, 78) !important;
}

.no-oklch .bg-primary {
  background-color: rgb(234, 179, 8) !important;
}

.no-oklch .bg-accent {
  background-color: rgb(251, 191, 36) !important;
}

.no-oklch .text-primary {
  color: rgb(234, 179, 8) !important;
}

.no-oklch .text-accent {
  color: rgb(251, 191, 36) !important;
}

.no-oklch .text-background {
  color: rgb(255, 255, 255) !important;
}

.no-oklch .border-primary {
  border-color: rgb(234, 179, 8) !important;
}

.no-oklch .border-accent {
  border-color: rgb(251, 191, 36) !important;
}

/* Fix for bg-fixed on mobile devices */
@media (max-width: 768px) {
  .bg-fixed {
    background-attachment: scroll !important;
  }
}
